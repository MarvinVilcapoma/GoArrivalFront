<mat-toolbar *ngIf="head.validPhone()" color="primary" class="example-toolbar">
    <button mat-icon-button (click)="sidenav.toggle()"><mat-icon>menu</mat-icon></button>
    <h1 class="example-app-name">Menus</h1>
</mat-toolbar>


<mat-sidenav-container class="example-container" autosize>


    <mat-sidenav #sidenav class="example-sidenav" mode="side" opened="true" [disableClose]="true" (mouseenter)="mouseenter()"
        (mouseleave)="mouseleave()">
        <app-sidenav></app-sidenav>
    </mat-sidenav>

    <div id="show-table" class="example-sidenav-content p-6 container">
        <div class="flex flex-col sm:flex-row gap-4">
            <form [formGroup]="form">
                <div class="row m-0 p-0 align-items-center hea">
                    <div class="col text-center">
                        <h3 style="text-decoration: underline;">{{title}}</h3>
                    </div>
                </div>

                <div class="row m-0 p-0">
                    <div class="col mt-3 mb-3" style="text-align: start;">
                        <h4>{{subtitle}}</h4>
                    </div>
                </div>

            </form>

            <div id="valid-table" class="row m-0 p-0 align-items-center hea">
                <div class="col">
                    <div class="box">
                        <form name="search">
                            <input (keyup)="applyFilter($event)" type="text" class="inputeq" name="txt">
                        </form>

                        <i class="fas fa-search"></i>

                    </div>
                </div>


                <div class="col" style="text-align: end;">
                    <button (click)="showDialog()" class="" color="primary" style="margin-right: 10px;" mat-mini-fab
                        matTooltip="Cargar datos" type="button">
                        <mat-icon>folder</mat-icon>
                    </button>
                    <button (click)="exportAsXLSX()" class="" color="warn" mat-mini-fab matTooltip="Descargar datos"
                        type="button">
                        <mat-icon>file_download</mat-icon>
                    </button>

                    <button [matMenuTriggerFor]="columnFilterMenu" class="flex-none" mat-icon-button
                        matTooltip="Filtrar Columnas" type="button">
                        <mat-icon>filter_list</mat-icon>
                    </button>
                    <button (click)="createFlow()" class="" color="primary" mat-mini-fab matTooltip="Agregar flujo"
                        type="button">
                        <mat-icon>add</mat-icon>
                    </button>

                </div>
            </div>

            <mat-menu #columnFilterMenu="matMenu">
                <button (click)="toggleColumnVisibility(column, $event)" *ngFor="let column of columns" mat-menu-item
                    class="">
                    <mat-checkbox (click)="$event.stopPropagation()" [(ngModel)]="column.visible" color="primary">
                        {{ column.label }}
                    </mat-checkbox>

                </button>
            </mat-menu>

            <table id="table-flows" [dataSource]="dataSource" class="w-full" mat-table matSort>

                <ng-container *ngFor="let col of columns" [matColumnDef]="col.property">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Orden por estado"> {{
                        col.label }}
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <span *ngIf="col.label != 'Acciones'">
                            {{element[col.property]}}

                        </span>
                        <button *ngIf="col.label === 'Acciones'" [matMenuTriggerFor]="menu" mat-icon-button
                            aria-label="">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button (click)="updateAproval(element)" mat-menu-item>
                                <mat-icon>edit</mat-icon>
                                Editar
                            </button>

                        </mat-menu>
                    </td>

                </ng-container>

                <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
                <tr *matRowDef="let row; columns: visibleColumns" mat-row></tr>


            </table>
            <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize" class="sticky left-0">
            </mat-paginator>

        </div>





    </div>

</mat-sidenav-container>

<p-dialog header="Carga tu archivo" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false"
    [resizable]="false">
    <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php" cancelStyleClass="btnUploadCancel"
        chooseLabel="Seleccionar" uploadLabel="Cargar Archivo" cancelLabel="Cancelar" (onUpload)="onUpload($event)"
        [multiple]="false" accept=".xlsx" mode="advanced">

        <ng-template pTemplate="toolbar">
            <div class="py-3">Click aqu√≠ para descargar el modelo</div>
    <span class="link"><a href="https://domiruthgeneral.blob.core.windows.net/general/ManageByExcel/FlujoAprobacion{{idType}}.xlsx"> https://domiruthgeneral.blob.core.windows.net/general/ManageByExcel/FlujoAprobacion{{idType}}.xlsx</a></span>
        </ng-template>
    
        
       
        <ng-template pTemplate="content">
            <ul *ngIf="uploadedFiles.length">
                <li *ngFor="let file of uploadedFiles">{{ file.name }} - {{ file.size }} bytes</li>
            </ul>
        </ng-template>
    </p-fileUpload>
</p-dialog>

<p-toast position="top-center" key="tc"></p-toast>