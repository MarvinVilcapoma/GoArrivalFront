<mat-toolbar *ngIf="head.validPhone()" color="primary" class="example-toolbar">
    <button mat-icon-button (click)="sidenav.toggle()"><mat-icon>menu</mat-icon></button>
    <h1 class="example-app-name">Menus</h1>
</mat-toolbar>


<mat-sidenav-container class="example-container" autosize>


    <mat-sidenav #sidenav class="example-sidenav" mode="side" opened="true" [disableClose]="true"
        (mouseenter)="mouseenter()" (mouseleave)="mouseleave()">
        <app-sidenav></app-sidenav>
    </mat-sidenav>

    <div class="example-sidenav-content p-6 container btn-back">
       
            <span (click)="back()" class="text-name-menu">Retroceder</span>
       
        
        <div *ngIf="validData" class="flex flex-col sm:flex-row gap-4">
            <div class="row m-0 p-0">
                <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 m-0 p-0 text-center">
                    <h3>{{dataUpdate.name}}</h3>
                </div>
                <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 m-0 p-0">
                    <span class="text-title">{{dataUpdate.description}}</span>
                </div>
                <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 m-0 p-0">
                    <span class="text-title"> Aplica para el servicio de {{dataUpdate.serviceName}}</span>
                </div>
            </div>


        </div>

        <div class="row m-0 p-0 align-items-center hea">
            <div class="col">
                <div class="box">
                    <form name="search">
                        <input (keyup)="applyFilter($event)" type="text" class="inputeq" name="txt">
                    </form>

                    <i class="fas fa-search"></i>

                </div>
            </div>


            <div class="col" style="text-align: end;">
                
                <button (click)="exportAsXLSX()" class="" color="warn" mat-mini-fab matTooltip="Descargar datos"
                    type="button">
                    <mat-icon>file_download</mat-icon>
                </button>

                <button [matMenuTriggerFor]="columnFilterMenu" class="flex-none" mat-icon-button
                    matTooltip="Filtrar Columnas" type="button">
                    <mat-icon>filter_list</mat-icon>
                </button>
                <button *ngIf="codePolicy === 'P5'" (click)="updateAdditonal()"  style="margin-right: 10px !important;" color="primary" mat-mini-fab matTooltip="Descargar datos"
                    type="button">
                    <mat-icon>attach_money</mat-icon>
                </button>
                <button (click)="createFlow()" class="" color="primary" mat-mini-fab matTooltip="Agregar polÃ­tica"
                    type="button">
                    <mat-icon>add</mat-icon>
                </button>

            </div>
        </div>

        <mat-menu #columnFilterMenu="matMenu">
            <button (click)="toggleColumnVisibility(column, $event)" *ngFor="let column of columns" mat-menu-item
                class="">
                <mat-checkbox (click)="$event.stopPropagation()" [(ngModel)]="column.visible" color="primary">
                    {{ column.label }}
                </mat-checkbox>

            </button>
        </mat-menu>

        <table id="table-policy" [dataSource]="dataSource" class="w-full" mat-table matSort>

            <ng-container *ngFor="let col of columns" [matColumnDef]="col.property">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Orden por estado">
                    {{col.label }}
                </th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="col.label != 'Acciones'">
                        {{element[col.property]}}

                    </span>
                    <button *ngIf="col.label === 'Acciones'" [matMenuTriggerFor]="menu" mat-icon-button aria-label="">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button (click)="updatePolicy(element)" mat-menu-item>
                            <mat-icon>edit</mat-icon>
                            Editar
                        </button>

                    </mat-menu>
                </td>

            </ng-container>

            <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
            <tr *matRowDef="let row; columns: visibleColumns" mat-row></tr>
        </table>

        <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize" class="sticky left-0">
        </mat-paginator>

    </div>
</mat-sidenav-container>




<p-dialog header="{{textHeader}}" [(visible)]="visible" [blockScroll]="true" [closeOnEscape]="false" [modal]="true" [style]="{ width: '85vw', height: '800px' }" [maximizable]="true"
    [draggable]="false" [resizable]="false">
    <div class="container">
        <app-policy-create-update *ngIf="visible" (select)="changeHeight($event)" [codePolicy]="id" [dataUpdate]="dataEdit"></app-policy-create-update>
    </div>
</p-dialog>