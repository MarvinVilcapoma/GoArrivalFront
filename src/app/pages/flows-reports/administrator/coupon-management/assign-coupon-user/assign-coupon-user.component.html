<ng-container>
    <div class="card-management-container">
        <div>
            <h3>Asignar usuario por empresa</h3>
        </div>
        <mat-progress-bar *ngIf="loading" mode="query"></mat-progress-bar>
        <div class="card-management-form">

            <br>

            <p-dropdown [options]="lstCompany" [filter]="true" [scrollHeight]="'150px'" (onChange)="showTable()" filterBy="name"  [(ngModel)]="selectedCompany"
                placeholder="Empresas" optionLabel="name" optionValue="id"></p-dropdown>

            <br>

            <p-treeTable *ngIf="validtable" [value]="files" [columns]="cols" (onHeaderCheckboxToggle)="validCheck($event)" [paginator]="true" [totalRecords]="totalRecords" selectionMode="checkbox" [rows]="6" [(selection)]="selectedNodes" [scrollable]="true" [tableStyle]="{'min-width':'50rem'}">
                <ng-template pTemplate="caption">
                    <div class="flex">
                        <p-treeTableHeaderCheckbox ></p-treeTableHeaderCheckbox>
                        <span class="ml-2">Seleccionar los primeros 200</span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th *ngFor="let col of columns">
                            {{ col.header }}
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowNode let-rowData="rowData" let-columns="columns">
                    <tr [ttRow]="rowNode" [ttSelectableRow]="rowNode">
                        <td *ngFor="let col of columns; let i = index">
     
                            <p-treeTableCheckbox [value]="rowNode" *ngIf="i === 0"></p-treeTableCheckbox>
                            {{ rowData[col.field] }}
                        </td>
                    </tr>
                </ng-template>
            </p-treeTable>

            
        </div>
       
    </div>
    <div class="row m-0 p-0 ">
        <div class="col mt-4 mb-2 text-center">
            <mat-dialog-actions align="end">
                <button color="primary" (click)="sendCouponByMail()" [disabled]="selectedNodes == undefined || selectedNodes?.length == 0" mat-flat-button type="submit">
                    Asignar Cup√≥n
                </button>
            </mat-dialog-actions>
        </div>
    </div>
</ng-container>